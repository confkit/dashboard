# 编码规范

## 安全红线

**禁止任何可能造成权限泄露的代码**, 包括但不限于:

- 密钥、令牌、密码明文写入代码
- 敏感信息输出到日志
- 不安全的权限校验逻辑
- 越权访问漏洞

此规则无例外, 必须严格遵守.

## 禁止硬编码

所有配置值、魔法数字、字符串字面量必须统一管理:

1. **先检查**项目是否已有常量/配置管理机制
2. **已有机制**: 添加到现有常量文件或配置文件
3. **无现有机制**: 选择合理位置创建统一管理

**例外情况**:

- 示例代码、案例演示、mock 数据可以使用硬编码
- 受限于未完成功能的临时硬编码, 必须标记: `// TODO: RISK - [原因描述]`

## 向后兼容

**默认不考虑向后兼容**, 除非开发者明确要求.

未正式发版的项目进行重构、重新设计或重新实现功能时:

- **直接修改** - 不要为"兼容性"保留过时方法
- **干净实现** - 不要添加"兼容垫片"或"迁移桥接"
- **不加过渡注释** - 避免"旧实现: "、"遗留代码: "或"重构自: "
- **不主动添加向后兼容层** - 只有开发者明确要求时才处理向后兼容

目标: 生产级代码, 而非过渡性脚手架.

## 跨文件一致性

任何变更确认后:

- **检查相关文件**是否需要同步
- **更新关联测试** (如果存在测试文件)
- **验证类型定义** (如果使用 TypeScript)
- **检查文档** (如果存在设计文档)

## TODO 标记规范

对不确定或不完整的内容, 使用标准格式:

```
// TODO: [描述] - Context: [为什么不确定]
// TODO: RISK - [风险描述]
```

使用场景: 需求模糊、边界情况需验证、集成点不明确、临时硬编码

## UI 编码

编写示例 UI 时尽量不使用背景色. 如需突出差异, 使用不同的颜色或 border-width 进行区分.
